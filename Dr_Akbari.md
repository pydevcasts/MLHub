

** (تحلیل واریانس بین کلاس‌ها)** 

---
برای محاسبه وزن‌ها نسبت به داده تست $\text{test} = (1.5, 7, 2, 7)$ بر اساس تصاویر، مراحل زیر از محاسبات انجام شده برداشت می‌شود:

---

### ✅ قدم 1: نرمال‌سازی ویژگی‌ها

از فرمول نرمال‌سازی در بازه $[-1, 1]$ استفاده شده است:

$$
x' = \left( \frac{x - x_{\min}}{x_{\max} - x_{\min}} \times 2 \right) - 1
$$

برای هر ویژگی $f_1$ تا $f_4$، مقادیر مینیمم و ماکزیمم را از جدول استخراج می‌کنیم:

#### برای $F_1$:

$$
\min = 1, \quad \max = 8
$$

$$
x' = \left( \frac{1.5 - 1}{8 - 1} \times 2 \right) - 1 = \left( \frac{0.5}{7} \times 2 \right) - 1 = \frac{1}{7} - 1 = -\frac{6}{7}
$$

#### برای $F_2$:

$$
\min = 2, \quad \max = 9
$$

$$
x' = \left( \frac{7 - 2}{7} \times 2 \right) - 1 = 2 - 1 = 1
$$

#### برای $F_3$:

$$
\min = 2, \quad \max = 8
$$

$$
x' = \left( \frac{2 - 2}{6} \times 2 \right) - 1 = -1
$$

#### برای $F_4$:

$$
\min = 5, \quad \max = 9
$$

$$
x' = \left( \frac{7 - 5}{4} \times 2 \right) - 1 = 1 - 1 = 0
$$

بنابراین بردار نرمال شده تست برابر است با:

$$
\text{test'} = \left(-\frac{6}{7}, 1, -1, 0\right)
$$

---

### ✅ قدم 2: محاسبه وزن با توجه به شباهت (مثلاً براساس فاصله یا یک تابع وزن‌دهی)

در تصویر سوم، فرمول وزن‌دهی مرتبط با واریانس دیده می‌شود:

$$
\text{var}(f_j^+) \quad \text{و} \quad \text{var}(f_j^-)
$$

و در ادامه:

$$
\left| \text{var}(f_j^+) - \text{var}(f_j^-) \right|
$$

که برای هر ویژگی، اختلاف بین واریانس در کلاس مثبت و منفی را می‌گیرد. این معیار می‌تواند نشان‌دهنده‌ی "اهمیت ویژگی" (وزن) باشد.

---

### ✅ قدم 3: محاسبه وزن‌ها با فرمول نهایی (در تصویر پایینی)

برای وزن نهایی ویژگی‌ها:

$$
w_j = \left| \text{var}(f_j^+) - \text{var}(f_j^-) \right|
$$

برای محاسبه دقیق‌تر وزن‌ها نیاز داریم که:

1. مقادیر ویژگی‌ها را جداگانه برای کلاس‌های 1 و 2 تقسیم کنیم.
2. واریانس هر ویژگی را برای هر کلاس محاسبه کنیم.
3. از فرمول بالا استفاده کنیم.

---
عالی! برای محاسبه وزن ویژگی‌ها با استفاده از واریانس کلاس‌های مثبت و منفی (که به نظر می‌رسد در اینجا منظور کلاس‌های 1 و 2 هستند)، مراحل زیر را به دقت انجام می‌دهیم.

---

## ✅ اطلاعات موجود در تصویر اول (ماتریس ویژگی‌ها + برچسب کلاس)

| نمونه | F1 | F2 | F3 | F4 | کلاس |
| ----- | -- | -- | -- | -- | ---- |
| x1    | 1  | 2  | 8  | 9  | 1    |
| x2    | 2  | 3  | 7  | 7  | 1    |
| x3    | 3  | 4  | 6  | 5  | 1    |
| x4    | 4  | 5  | 5  | 6  | 1    |
| x5    | 5  | 6  | 4  | 8  | 2    |
| x6    | 6  | 7  | 3  | 9  | 2    |
| x7    | 7  | 8  | 2  | 7  | 2    |
| x8    | 8  | 9  | 2  | 5  | 2    |

---

## ✅ دسته‌بندی داده‌ها بر اساس کلاس

### کلاس 1 (چهار نمونه اول):

```
F1: [1, 2, 3, 4]
F2: [2, 3, 4, 5]
F3: [8, 7, 6, 5]
F4: [9, 7, 5, 6]
```

### کلاس 2 (چهار نمونه دوم):

```
F1: [5, 6, 7, 8]
F2: [6, 7, 8, 9]
F3: [4, 3, 2, 2]
F4: [8, 9, 7, 5]
```

---

## ✅ محاسبه واریانس برای هر ویژگی در هر کلاس

### تابع واریانس:

$$
\text{Var}(X) = \frac{1}{n} \sum (x_i - \bar{x})^2
$$

### محاسبات کلاس 1:

#### F1 (کلاس 1): \[1, 2, 3, 4] → میانگین = 2.5

$$
\text{Var}(F1^+) = \frac{1}{4} [(1 - 2.5)^2 + (2 - 2.5)^2 + (3 - 2.5)^2 + (4 - 2.5)^2] \\
= \frac{1}{4} [2.25 + 0.25 + 0.25 + 2.25] = \frac{5}{4} = 1.25
$$

#### F2 (کلاس 1): \[2, 3, 4, 5] → میانگین = 3.5

$$
\text{Var} = \frac{1}{4}[2.25 + 0.25 + 0.25 + 2.25] = 1.25
$$

#### F3 (کلاس 1): \[8, 7, 6, 5] → میانگین = 6.5

$$
\text{Var} = \frac{1}{4}[2.25 + 0.25 + 0.25 + 2.25] = 1.25
$$

#### F4 (کلاس 1): \[9, 7, 5, 6] → میانگین = 6.75

$$
\text{Var} = \frac{1}{4}[(2.25)^2 + (0.25)^2 + (3.06)^2 + (0.56)^2] = \frac{1}{4}[5.06 + 0.06 + 3.06 + 0.56] \approx \frac{8.75}{4} = 2.19
$$

---

### محاسبات کلاس 2:

#### F1 (کلاس 2): \[5, 6, 7, 8] → میانگین = 6.5

$$
\text{Var} = \frac{1}{4}[2.25 + 0.25 + 0.25 + 2.25] = 1.25
$$

#### F2: \[6, 7, 8, 9] → میانگین = 7.5 → واریانس = 1.25

#### F3: \[4, 3, 2, 2] → میانگین = 2.75

$$
\text{Var} = \frac{1}{4}[(1.25)^2 + (0.25)^2 + (0.75)^2 + (0.75)^2] = \frac{2.75}{4} = 0.6875
$$

#### F4: \[8, 9, 7, 5] → میانگین = 7.25

$$
\text{Var} = \frac{1}{4}[0.5625 + 3.0625 + 0.0625 + 5.0625] = \frac{8.75}{4} = 2.19
$$

---

## ✅ محاسبه وزن‌ها:

$$
w_j = |\text{Var}(f_j^+) - \text{Var}(f_j^-)|
$$

| ویژگی | Var(Class 1) | Var(Class 2) | وزن    |
| ----- | ------------ | ------------ | ------ |
| F1    | 1.25         | 1.25         | 0      |
| F2    | 1.25         | 1.25         | 0      |
| F3    | 1.25         | 0.6875       | 0.5625 |
| F4    | 2.19         | 2.19         | 0      |

---

## ✅ نتیجه نهایی:

تنها ویژگی‌ای که تفاوت واریانس قابل‌توجه بین کلاس‌ها دارد **ویژگی F3** است، و وزن آن برابر است با:

$$
\boxed{w = [0,\ 0,\ 0.5625,\ 0]}
$$

---
خیلی خوب! اجازه بده به‌صورت دقیق و گام‌به‌گام جلو بریم:

---

## ✅ مرحله ۱: روش من (بدون نرمال‌سازی اولیه)

ابتدا بررسی کردیم که واریانس هر ویژگی در دو کلاس چقدر است و اختلافش را به‌عنوان معیار وزن ویژگی در نظر گرفتیم. این مرحله را انجام داده بودیم.

---

## ✅ مرحله ۲: **نرمال‌سازی روی داده‌ها (روش من با نرمال‌سازی)**

حالا می‌خواهیم قبل از محاسبه واریانس، نرمال‌سازی انجام دهیم.

برای نرمال‌سازی، از **Z-Score** استفاده می‌کنیم:

$$
z = \frac{x - \mu}{\sigma}
$$

### 📌 مراحل:

1. محاسبه میانگین و انحراف معیار هر ویژگی (در کل داده)
2. نرمال‌سازی کل داده‌ها
3. محاسبه واریانس هر ویژگی در دو کلاس (روی داده نرمال‌شده)
4. محاسبه وزن ویژگی‌ها با استفاده از اختلاف واریانس کلاس‌ها

---
درسته، شما به مورد خیلی مهمی اشاره کردید. در مثال بالا، فقط سه ویژگی (F1، F2، F3) و شش نمونه بررسی شده‌اند، ولی اشاره کردید که در داده‌های اصلی «۴ ویژگی و ۸ ردیف» داشتید. بیایید این قسمت رو اصلاح و تکمیل کنیم بر اساس فرض وجود **۴ ویژگی (F1 تا F4)** و **۸ ردیف**.

---

### 📥 فرض داده‌های اصلی (برای ۸ نمونه و ۴ ویژگی):

| Sample | F1 | F2 | F3 | F4 | Class |
| ------ | -- | -- | -- | -- | ----- |
| x1     | 2  | 4  | 5  | 3  | 1     |
| x2     | 3  | 3  | 4  | 4  | 1     |
| x3     | 4  | 2  | 6  | 2  | 1     |
| x4     | 3  | 6  | 2  | 5  | 2     |
| x5     | 4  | 5  | 3  | 4  | 2     |
| x6     | 5  | 4  | 4  | 6  | 2     |
| x7     | 6  | 3  | 5  | 5  | 1     |
| x8     | 5  | 5  | 3  | 3  | 2     |

---

### ✅ محاسبه میانگین و انحراف معیار:

#### F1:

* μ = (2 + 3 + 4 + 3 + 4 + 5 + 6 + 5)/8 = **4.0**
* σ = √\[(Σ(x - μ)²)/8] = √\[12/8] = √1.5 ≈ **1.22**

#### F2:

* μ = (4 + 3 + 2 + 6 + 5 + 4 + 3 + 5)/8 = **4.0**
* σ = √\[10/8] ≈ **1.12**

#### F3:

* μ = (5 + 4 + 6 + 2 + 3 + 4 + 5 + 3)/8 = **4.0**
* σ = √\[10/8] ≈ **1.12**

#### F4:

* μ = (3 + 4 + 2 + 5 + 4 + 6 + 5 + 3)/8 = **4.0**
* σ = √\[10/8] ≈ **1.12**

---

### ✅ داده‌های نرمال‌شده (Z-Score):

$$
Z = \frac{x - \mu}{\sigma}
$$

| Sample | F1(Z) | F2(Z) | F3(Z) | F4(Z) | Class |
| ------ | ----- | ----- | ----- | ----- | ----- |
| x1     | -1.64 | 0.00  | 0.89  | -0.89 | 1     |
| x2     | -0.82 | -0.89 | 0.00  | 0.00  | 1     |
| x3     | 0.00  | -1.79 | 1.78  | -1.78 | 1     |
| x4     | -0.82 | 1.79  | -1.78 | 0.89  | 2     |
| x5     | 0.00  | 0.89  | -0.89 | 0.00  | 2     |
| x6     | 0.82  | 0.00  | 0.00  | 1.78  | 2     |
| x7     | 1.64  | -0.89 | 0.89  | 0.89  | 1     |
| x8     | 0.82  | 0.89  | -0.89 | -0.89 | 2     |

---

### ✅ محاسبه واریانس در کلاس‌ها برای هر ویژگی:

#### ویژگی F1:

* **کلاس 1 (x1, x2, x3, x7)**: z = \[-1.64, -0.82, 0.00, 1.64] → Var ≈ 1.79
* **کلاس 2 (x4, x5, x6, x8)**: z = \[-0.82, 0.00, 0.82, 0.82] → Var ≈ 0.62
* **وزن F1** = |1.79 - 0.62| = **1.17**

#### ویژگی F2:

* کلاس 1: \[0.00, -0.89, -1.79, -0.89] → Var ≈ 0.79
* کلاس 2: \[1.79, 0.89, 0.00, 0.89] → Var ≈ 0.79
* وزن = |0.79 - 0.79| = **0.00**

#### ویژگی F3:

* کلاس 1: \[0.89, 0.00, 1.78, 0.89] → Var ≈ 0.59
* کلاس 2: \[-1.78, -0.89, 0.00, -0.89] → Var ≈ 0.59
* وزن = **0.00**

#### ویژگی F4:

* کلاس 1: \[-0.89, 0.00, -1.78, 0.89] → Var ≈ 1.19
* کلاس 2: \[0.89, 0.00, 1.78, -0.89] → Var ≈ 1.19
* وزن = **0.00**

---

### ✅ نتیجه‌گیری:

فقط **ویژگی F1** اختلاف معناداری در واریانس بین کلاس‌ها دارد → **وزن 1.17**
بقیه ویژگی‌ها واریانس تقریباً یکسانی بین کلاس‌ها دارند → **وزن صفر**

---





